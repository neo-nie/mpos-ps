
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=7,IE=9" />
    <!--The viewport meta tag is used to improve the presentation and behavior of the samples 
      on iOS devices-->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no"/>
    <title>Topographic Map</title>
    <link rel="stylesheet" type="text/css" href="http://serverapi.arcgisonline.com/jsapi/arcgis/3.1/js/dojo/dijit/themes/claro/claro.css">
    <link rel="stylesheet" type="text/css" href="http://serverapi.arcgisonline.com/jsapi/arcgis/3.1/js/esri/dijit/css/Popup.css">
    <style>
        html, body { height: 100%; width: 100%; margin: 0; padding: 0; }
        .esriScalebar{
            padding: 20px 20px;
        }
        #map{
            padding:0;
        }
    </style>
    <script type="text/javascript">var djConfig = {parseOnLoad: true};</script>
    <!--<script type="text/javascript" src="http://serverapi.arcgisonline.com/jsapi/arcgis/?v=3.1"></script>-->
    <script type="text/javascript" src="../scripts/arcgis-3.1.js"></script>
    <script type="text/javascript">
        dojo.require("dijit.layout.BorderContainer");
        dojo.require("dijit.layout.ContentPane");
        dojo.require("esri.map");
        dojo.require("esri.arcgis.utils");

        var map;

        function init() {
            var mapDeferred = esri.arcgis.utils.createMap("5b9675ca7ca9426a99ced88f66b42331", "map", {
                mapOptions: {
                    slider: true,
                    nav:false,
                    wrapAround180:true
                }
            });

            mapDeferred.then(function(response){
                map = response.map;

                dojo.connect(dijit.byId('map'), 'resize', map,map.resize);
            });
        }

        dojo.addOnLoad(init);
    </script>
    <!--<script type="text/javascript">-->
        <!--dojo.require("dijit.layout.BorderContainer");-->
        <!--dojo.require("dijit.layout.ContentPane");-->
        <!--dojo.require("esri.map");-->
        <!--dojo.declare("GoogleMapLayer", esri.layers.TiledMapServiceLayer, {-->
            <!--constructor:function () {-->
                <!--this.spatialReference = new esri.SpatialReference({ wkid:102113 });-->
                <!--this.initialExtent = this.fullExtent = new esri.geometry.Extent(-20037508.342787, -20037508.342787, 20037508.342787, 20037508.342787, this.spatialReference);-->

                <!--this.tileInfo = new esri.layers.TileInfo({-->
                    <!--"rows":256,-->
                    <!--"cols":256,-->
                    <!--"dpi":96,-->
                    <!--"format":"PNG32",-->
                    <!--"compressionQuality":0,-->
                    <!--"origin":{-->
                        <!--"x":-20037508.342787,-->
                        <!--"y":20037508.342787-->
                    <!--},-->
                    <!--"spatialReference":{-->
                        <!--"wkid":102113-->
                    <!--},-->
                    <!--"lods":[-->
<!--//                    {"level":0, "resolution":156543.033928, "scale":591657527.591555},-->
<!--//                    {"level":1, "resolution":78271.5169639999, "scale":295828763.795777},-->
<!--//                    {"level":2, "resolution":39135.7584820001, "scale":147914381.897889},-->
<!--//                    {"level":3, "resolution":19567.8792409999, "scale":73957190.948944},-->
<!--//                    {"level":4, "resolution":9783.93962049996, "scale":36978595.474472},-->
<!--//                    {"level":5, "resolution":4891.96981024998, "scale":18489297.737236},-->
<!--//                    {"level":6, "resolution":2445.98490512499, "scale":9244648.868618},-->
<!--//                    {"level":7, "resolution":1222.99245256249, "scale":4622324.434309},-->
<!--//                    {"level":8, "resolution":611.49622628138, "scale":2311162.217155},-->
<!--//                    {"level":9, "resolution":305.748113140558, "scale":1155581.108577},-->
<!--//                    {"level":10, "resolution":152.874056570411, "scale":577790.554289},-->
                        <!--{"level":11, "resolution":76.4370282850732, "scale":288895.277144},-->
                        <!--{"level":12, "resolution":38.2185141425366, "scale":144447.638572},-->
                        <!--{"level":13, "resolution":19.1092570712683, "scale":72223.819286},-->
                        <!--{"level":14, "resolution":9.55462853563415, "scale":36111.909643},-->
                        <!--{"level":15, "resolution":4.77731426794937, "scale":18055.954822},-->
                        <!--{"level":16, "resolution":2.38865713397468, "scale":9027.977411}-->
<!--//                    {"level":17, "resolution":1.19432856685505, "scale":4513.988705},-->
<!--//                    {"level":18, "resolution":0.597164283559817, "scale":2256.994353},-->
<!--//                    {"level":19, "resolution":0.298582141647617, "scale":1128.497176}-->
                    <!--]-->
                <!--});-->

                <!--this.loaded = true;-->
                <!--this.onLoad(this);-->
            <!--},-->

            <!--getTileUrl:function (level, row, col) {-->
<!--//            var url = dojo.string.substitute("http://mt${0}.google.cn/vt/lyrs=s@163000000&hl=zh-CN&gl=cn&x=${1}&s=&y=${2}&z=${3}&s=", [row % 4, col, row, level]);-->
                <!--var url = dojo.string.substitute("http://mt${0}.google.cn/vt/lyrs=m@163000000&hl=zh-CN&gl=cn&x=${1}&s=&y=${2}&z=${3}&s=", [row % 4, col, row, level]);-->
<!--//            var url = dojo.string.substitute("http://192.168.4.206/foshanmap/${0}/${1}_${2}.png", [level, col, row]);-->
                <!--return url;-->
            <!--}-->
        <!--});-->

        <!--function init() {-->
            <!--var map = new esri.Map("map");-->
            <!--dojo.connect(map, "onLoad", function () {-->
                <!--//after map loads, connect to listen to mouse move & drag events-->
                <!--dojo.connect(map, "onMouseMove", showCoordinates);-->
                <!--dojo.connect(map, "onMouseDrag", showCoordinates);-->
            <!--});-->

            <!--map.addLayer(new GoogleMapLayer());-->
<!--//        map.zoomTo(12631027.4361204, 2639917.78294726, 12);-->

            <!--var pnt = new esri.geometry.Point(12631027.4361204, 2639917.78294726, new esri.SpatialReference({ wkid:102113 }));-->
<!--//        map.centerAndZoom(pnt, 15);-->
            <!--map.centerAt(pnt);-->
        <!--}-->

        <!--function showCoordinates(evt) {-->
            <!--//get mapPoint from event-->
            <!--//The map is in web mercator - modify the map point to display the results in geographic-->
            <!--var mp = esri.geometry.webMercatorToGeographic(evt.mapPoint);-->
            <!--//display mouse coordinates-->
            <!--dojo.byId("info").innerHTML = mp.x + ", " + mp.y;-->
        <!--}-->

        <!--dojo.addOnLoad(init);-->

    <!--</script>-->
</head>

<body class="claro">
<div dojotype="dijit.layout.BorderContainer" design="headline" gutters="false" style="width: 100%; height: 100%; margin: 0;">
    <div id="map" dojotype="dijit.layout.ContentPane" region="center" style="border:1px solid #000;padding:0;">
    </div>
</div>
</body>

</html>